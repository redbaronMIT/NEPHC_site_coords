<?php
namespace Moto\Filter; class Transliterate extends AbstractFilter { public function filter($value) { $value = $this->_transliterateCzech($value); $value = $this->_transliterateRussian($value); $value = $this->_transliterateGerman($value); $value = $this->_transliterateFrench($value); $value = $this->_transliterateHungarian($value); $value = $this->_transliteratePolish($value); $value = $this->_transliterateDanish($value); $value = $this->_transliterateCroatian($value); $value = $this->_transliterateSymbols($value); return $value; } protected function _transliterateRussian($string) { $table = array ( "А" => "A", "Б" => "B", "В" => "V", "Г" => "G", "Д" => "D", "Є" => "E", "Е" => "JE", "Ё" => "JO", "Ж" => "ZH", "З" => "Z", "И" => "I", "Й" => "J", "К" => "K", "Л" => "L", "М" => "M", "Н" => "N", "О" => "O", "П" => "P", "Р" => "R", "С" => "S", "Т" => "T", "У" => "U", "Ф" => "F", "Х" => "KH", "Ц" => "TS", "Ч" => "CH", "Ш" => "SH", "Щ" => "SHCH", "Ъ" => "", "Ы" => "Y", "Ь" => "", "Э" => "E", "Ю" => "JU", "Я" => "JA", "Ґ" => "G", "Ї" => "I", "а" => "a", "б" => "b", "в" => "v", "г" => "g", "д" => "d", "є" => "e", "е" => "e", "ё" => "jo", "ж" => "zh", "з" => "z", "и" => "i", "й" => "j", "к" => "k", "л" => "l", "м" => "m", "н" => "n", "о" => "o", "п" => "p", "р" => "r", "с" => "s", "т" => "t", "у" => "u", "ф" => "f", "х" => "kh", "ц" => "ts", "ч" => "ch", "ш" => "sh", "щ" => "shch", "ъ" => "", "ы" => "y", "ь" => "", "э" => "e", "ю" => "ju", "я" => "ja", "ґ" => "g", "ї" => "i" ); return strtr($string, $table); } protected function _transliterateCzech($string) { $table = array ( 'á' => 'a', 'č' => 'c', 'ď' => 'd', 'é' => 'e', 'ě' => 'e', 'í' => 'i', 'ň' => 'n', 'ó' => 'o', 'ř' => 'r', 'š' => 's', 'ť' => 't', 'ú' => 'u', 'ů' => 'u', 'ý' => 'y', 'ž' => 'z', 'Á' => 'A', 'Č' => 'C', 'Ď' => 'D', 'É' => 'E', 'Ě' => 'E', 'Í' => 'I', 'Ň' => 'N', 'Ó' => 'O', 'Ř' => 'R', 'Š' => 'S', 'Ť' => 'T', 'Ú' => 'U', 'Ů' => 'U', 'Ý' => 'Y', 'Ž' => 'Z', ); return strtr($string, $table); } protected function _transliterateGerman($string) { $table = array ( 'ä' => 'ae', 'ë' => 'e', 'ï' => 'i', 'ö' => 'oe', 'ü' => 'ue', 'Ä' => 'Ae', 'Ë' => 'E', 'Ï' => 'I', 'Ö' => 'Oe', 'Ü' => 'Ue', 'ß' => 'ss', ); return strtr($string, $table); } protected function _transliterateFrench($string) { $table = array ( 'â' => 'a', 'ê' => 'e', 'î' => 'i', 'ô' => 'o', 'û' => 'u', 'Â' => 'A', 'Ê' => 'E', 'Î' => 'I', 'Ô' => 'O', 'Û' => 'U', 'œ' => 'oe', 'æ' => 'ae', 'Ÿ' => 'Y', 'ç' => 'c', 'Ç' => 'C', ); return strtr($string, $table); } protected function _transliterateHungarian($string) { $table = array ( 'á' => 'a', 'é' => 'e', 'í' => 'i', 'ó' => 'o', 'ö' => 'o', 'ő' => 'o', 'ú' => 'u', 'ü' => 'u', 'ű' => 'u', ); return strtr($string, $table); } protected function _transliteratePolish($string) { $table = array( 'ą' => 'a', 'ę' => 'e', 'ó' => 'o', 'ć' => 'c', 'ł' => 'l', 'ń' => 'n', 'ś' => 's', 'ż' => 'z', 'ź' => 'z', 'Ó' => 'O', 'Ć' => 'C', 'Ł' => 'L', 'Ś' => 'S', 'Ż' => 'Z', 'Ź' => 'Z' ); return strtr($string, $table); } protected function _transliterateDanish($string) { $table = array( 'æ' => 'ae', 'ø' => 'oe', 'å' => 'aa', 'Æ' => 'Ae', 'Ø' => 'Oe', 'Å' => 'Aa' ); return strtr($string, $table); } protected function _transliterateCroatian($string) { $table = array ( 'Č' => 'C', 'Ć' => 'C', 'Ž' => 'Z', 'Š' => 'S', 'Đ' => 'D', 'č' => 'c', 'ć' => 'c', 'ž' => 'z', 'š' => 's', 'đ' => 'd', ); return strtr($string, $table); } protected function _transliterateSymbols($value) { $table = array ( '"' => '_', "'" => '_', "`" => '_', "~" => '_', '/' => '', '\\' => '', ' ' => '-', ); $value = strtr($value, $table); return $value; } } 